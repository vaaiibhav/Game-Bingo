<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Screen</title>

    <style>
        body {
            background-image: url(background.png);
            overflow: hidden;
            /* background-size: cover; */
        }
    </style>
    <style>
        .wheel .outer {
            position: relative;
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 75%;
        }

        .wheel .inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-40%, -50%);
            -ms-transform: translate(-50%, -50%);
            /* background-color: #555;
            color: white; */
            /* font-size: 16px;
            padding: 12px 24px; */
            border: none;
            cursor: pointer;
            /* border-radius: 5px; */
            width: 40%;
        }
    </style>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script type="text/javascript">
        // Update the 'nojs'/'js' class on the html node
        var boxnow = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        var boxall = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        var blinkbanner;
        var coinrate = 10;
        var totalbet = 0;
        var winNumber;
        var winmultipler = 9;
        var angleInDegrees = 0;

        var thiswin;
        var angleWheelRotate;
        var allowbid = false;
        var uname, newgameid;
        var joker = false;
        var currentBal, userBal;
        var r1;


        const electron = require('electron');
        const { ipcRenderer } = electron;

        ipcRenderer.on('timer', function (e, countdown) {
            // console.log(countdown);
            if (countdown < 20 || currentBal == null || currentBal == undefined || uname == undefined) {
                allowbid = false;
            }

            if (countdown < 20) {

                document.getElementById("timerid").innerHTML = "Timer : " + "wait";
            }
            else {
                let ct = countdown - 20;
                document.getElementById("timerid").innerHTML = "Timer : " + ct;
            }
            if (countdown < 115 && countdown > 20 && currentBal != null && currentBal != undefined && uname != undefined) {
                allowbid = true;

            }
            if (countdown == 20) {
                console.log(boxall);
                savegame();
            }
        })
        ipcRenderer.on('uname', function (e, usrname) {
            uname = usrname;
        });
        console.log("Welcome: " + uname);
        ipcRenderer.on('lastwinsare', function (e, winns) {
            // console.log(winns);
            document.getElementById("u746-4").innerHTML = winns;
            //u746-4
        })
        ipcRenderer.on('joker', function (e, jokerserv) {
            joker = jokerserv;
        });
        ipcRenderer.on('newgameid', function (e, gameid) {
            // console.log('game id '+gameid);
            newgameid = gameid;
            document.getElementById("u499-4").innerHTML = "Game: " + gameid;
        });
        ipcRenderer.on('ucoins', function (e, bal) {
            // console.log('player balance: '+bal);
            userBal = bal;
            document.getElementById("totalbal").innerHTML = "Bal: " + bal;
        });
        ipcRenderer.on('winno', function (e, wnno) {
            // console.log('winner no: ' +wnno);
            winNumber = wnno;
            // blinkbanner();
            wheelAngle(winNumber);

        });
        document.documentElement.className = document.documentElement.className.replace(/\bnojs\b/g, 'js');
        Array.prototype.SumArray = function (arr) {
            var sum = [];
            if (arr != null && this.length == arr.length) {
                for (var i = 0; i < arr.length; i++) {
                    sum.push(this[i] + arr[i]);
                }
            }

            return sum;
        }
        // Check that all required assets are uploaded and up-to-date
        if (typeof Muse == "undefined") window.Muse = {}; window.Muse.assets = { "required": ["museutils.js", "museconfig.js", "jquery.watch.js", "jquery.musepolyfill.bgsize.js", "jquery.scrolleffects.js", "require.js", "game.css"], "outOfDate": [] };
    </script>
</head>

<body>

    <!-- container start -->
    <div class="cont">
        <!-- row 1 start -->
        <div class="row">
            <!-- col1 -->
            <div class="col-md-3">
                <div class="row" style="margin: 7%;">
                    <img src="text/text-score.png" alt="" style="height: 30px; margin-left: 30%;">
                    <img src="score-time_button.png" alt="" style="width: 100%;">
                </div>
                <div class="row" style="margin: 7%;">
                    <img src="text/text-time.png" alt="" style="height: 30px; margin-left: 30%;">
                    <img src="score-time_button.png" alt="" style="width: 100%;">
                </div>
                <div class="row">

                    <img src="chips/chips-background-left.png" alt="" style="width: 100%; ">
                    <img src="chips/withstroke/chip-10-withstroke.png" alt=""
                        style="position: fixed; float: left; width: 4%; margin-top: 1.3%; margin-left: 4.5%;"  id="buttonu254" onclick="coinrater('buttonu254')">
                    <img src="chips/withstroke/chip-20-withstroke.png" alt=""
                        style="position: fixed; float: left; width: 4%; margin-top: 1.3%; margin-left: 9.5%;">
                    <img src="chips/withstroke/chip-50-withstroke.png" alt=""
                        style="position: fixed; float: left; width: 4%; margin-top: 1.3%; margin-left: 14.5%;"  id="buttonu196" onclick="coinrater('buttonu196')">
                    <img src="chips/withstroke/chip-100-withstroke.png" alt=""
                        style="position: fixed; float: left; width: 4%; margin-top: 1.3%; margin-left: 19.5%;" id="buttonu195" onclick="coinrater('buttonu195')">


                </div>
            </div>

            <!-- col2 -->
            <div class="col-md-6">
                <div class="wheel" style="margin-left: 8%;">
                    <img src="wheel_outer.png" alt="" class="outer">
                    <img src="wheel_inner.png" alt="" class="inner">
                </div>
            </div>

            <!-- col3 -->
            <div class="col-md-3">
                <div class="row" style="margin-top: 7%; margin-right: 10%; margin-left: 7%;">
                    <img src="text/text-winner.png" alt="" style="height: 30px; margin-left: 22%;">
                    <img src="score-time_button.png" alt="" style="width: 100%;">
                </div>
                <div class="row" style="margin-top: 7%; margin-right: 10%; margin-left: 7%;">
                    <img src="text/text-last-10-data.png" alt="" style="height: 30px; margin-left: 8%;">
                    <img src="score-time_button.png" alt="" style="width: 100%;">
                </div>
                <div class="row" style="margin-top: 8%;">
                    <img src="chips/chips-background-right.png" alt="" style="width: 100%; ">
                    <img src="chips/withstroke/chip-500-withstroke.png" alt=""
                        style="position: fixed; float: right; width: 4%; margin-top: 1.3%; margin-left: 2.5%;">
                    <img src="chips/withstroke/chip-1000-withstroke.png" alt=""
                        style="position: fixed; float: right; width: 4%; margin-top: 1.3%; margin-left: 7.5%;">
                    <img src="chips/withstroke/chip-2000-withstroke.png" alt=""
                        style="position: fixed; float: right; width: 4%; margin-top: 1.3%; margin-left: 12.5%;">
                    <img src="chips/withstroke/chip-5000-withstroke.png" alt=""
                        style="position: fixed; float: right; width: 4%; margin-top: 1.3%; margin-left: 17.5%;">

                </div>

            </div>
            <img src="treasure-chest.png" alt="" style="position: fixed; top: 34%; width: 45%; left: 31%;">
            <img src="fun-target-arc.png" alt="" style="position: fixed; top: 54%; width: 105%;" height="22%">
            <img src="bottom part/print-button_red.png" alt="" style="position: fixed; width: 11%; top: 68%;">
            <img src="bottom part/cancel-button_red.png" alt=""
                style="position: fixed; width: 11%; top: 68%; left: 90%;">
        </div>
        <!-- row 1 end -->


        <!-- row 2 start -->
        <div class="row" style="margin-top: 5.5%;">


            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/1_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/2_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/3_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/4_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/5_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/6_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/7_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/8_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/9_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
            <div class="col">
                <img src="bottom part/antique_box.png" alt="" style="width: 100%;">
                <img src="bottom part/0-9-buttons-red/0_button_red.png" alt="" style="width: 60%; margin-left:20% ;">
            </div>
        </div>
        <!-- row 2 end -->

        <!-- row 3 start -->
        <div class="row">
            <img src="bottom part/left-bottom-button_red.png" alt="" style="height: 30px; margin-top: 1%;">
            <label for="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <img src="bottom part/bottom-status-display-bar.png" alt="" style="height: 30px; margin-top: 1%;"
                width="80%">
            <label for="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <img src="bottom part/exit-button_red.png" alt="" style="height: 30px; margin-top: 1%;">
        </div>
        <!-- row 3 end -->

        <!-- row 4 start -->
        <div class="row">

        </div>
        <!-- row 4 end -->


    </div>
    <!-- container end -->
    <script>
        var jkrWheel = document.getElementById("u384_img");
        var ctx = jkrWheel.getContext("2d");
        make_base();
        var base_image;
        function make_base() {
            base_image = new Image();
            base_image.src = 'images/circle.png?crc=531740649';
            base_image.onload = function () {
                // test that the image was loaded
                // or console.log if you prefer
                ctx.drawImage(base_image, 0, 0);
                ctx.save();
            }
        }
        var options = {
            prices: 20,
            duration: 3000, // The amount of milliseconds the roulette to spin
            min_spins: 8, // The minimum number of spins 
            max_spins: 15, // The maximum number of spins
            clockWise: false, // The direction the wheel will spin
        };

        var $r = $('#u384_img').fortune(options);
        function zeromaker() {
            boxnow.fill(0);
            // console.log(boxnow);
            updateboxes();
            jkSpinkHandler();

        }

        var jkSpinkHandler = function () {
            console.log('Handling SPin for Joker');
            //var price = Math.floor((Math.random() * 8));
            $r.spin(8).done(function (price) {

            });
        };

        function savegame() {
            boxall = boxall.SumArray(boxnow);//sumArray(boxall,boxnow);
            console.log('boxall savegame:' + boxall);
            var data = new Object();
            data.uname = uname;
            data.bet0 = boxall[0];
            data.bet1 = boxall[1];
            data.bet2 = boxall[2];
            data.bet3 = boxall[3];
            data.bet4 = boxall[4];
            data.bet5 = boxall[5];
            data.bet6 = boxall[6];
            data.bet7 = boxall[7];
            data.bet8 = boxall[8];
            data.bet9 = boxall[9];
            data = JSON.stringify(data);
            ipcRenderer.send('savegame', data);

        };
        function boxes(bxid) {
            // console.log(bxid);
            if (allowbid == true) {
                if (coinrate > currentBal) {
                    alert('Low Balance');
                }
                else {
                    switch (bxid) {
                        case 'buttonu957': boxnow[1] = boxnow[1] + coinrate; break;
                        case 'buttonu959': boxnow[2] = boxnow[2] + coinrate; break;
                        case 'buttonu961': boxnow[3] = boxnow[3] + coinrate; break;
                        case 'buttonu963': boxnow[4] = boxnow[4] + coinrate; break;
                        case 'buttonu965': boxnow[5] = boxnow[5] + coinrate; break;
                        case 'buttonu967': boxnow[6] = boxnow[6] + coinrate; break;
                        case 'buttonu969': boxnow[7] = boxnow[7] + coinrate; break;
                        case 'buttonu971': boxnow[8] = boxnow[8] + coinrate; break;
                        case 'buttonu973': boxnow[9] = boxnow[9] + coinrate; break;
                        case 'buttonu975': boxnow[0] = boxnow[0] + coinrate; break;
                    }
                }
            }
            updateboxes();
        }
        document.onkeypress = function (event) {
            if (coinrate > currentBal) {
                alert('Low Balance');
            }
            else {
                if (allowbid == true) {
                    var key_press = String.fromCharCode(event.keyCode);
                    if (key_press == 0) {
                        boxnow[0] = boxnow[0] + coinrate;
                    }
                    if (key_press == 1) {
                        boxnow[1] = boxnow[1] + coinrate;
                    }
                    if (key_press == 2) {
                        boxnow[2] = boxnow[2] + coinrate;
                    }

                    if (key_press == 3) {
                        boxnow[3] = boxnow[3] + coinrate;
                    }
                    if (key_press == 4) {
                        boxnow[4] = boxnow[4] + coinrate;
                    }
                    if (key_press == 5) {
                        boxnow[5] = boxnow[5] + coinrate;
                    }
                    if (key_press == 6) {
                        boxnow[6] = boxnow[6] + coinrate;
                    }
                    if (key_press == 7) {
                        boxnow[7] = boxnow[7] + coinrate;
                    }
                    if (key_press == 8) {
                        boxnow[8] = boxnow[8] + coinrate;
                    }
                    if (key_press == 9) {
                        boxnow[9] = boxnow[9] + coinrate;
                    }

                }
            }
            updateboxes();
        }
        function updateboxes() {
            document.getElementById('nowzero').innerHTML = boxnow[0];
            document.getElementById('nowone').innerHTML = boxnow[1];
            document.getElementById('nowtwo').innerHTML = boxnow[2];
            document.getElementById('nowthree').innerHTML = boxnow[3];
            document.getElementById('nowfour').innerHTML = boxnow[4];
            document.getElementById('nowfive').innerHTML = boxnow[5];
            document.getElementById('nowsix').innerHTML = boxnow[6];
            document.getElementById('nowseven').innerHTML = boxnow[7];
            document.getElementById('noweight').innerHTML = boxnow[8];
            document.getElementById('nownine').innerHTML = boxnow[9];
            totalbet = boxnow[0] + boxnow[1] + boxnow[2] + boxnow[3] + boxnow[4] + boxnow[5] + boxnow[6] + boxnow[7] + boxnow[8] + boxnow[9];
            document.getElementById("gamebalance").innerHTML = totalbet;
            currentBal = userBal - totalbet;
            console.log('currentbal: ' + currentBal + 'userBal: ' + userBal);
            document.getElementById("totalbal").innerHTML = "Bal: " + currentBal;

        }
        function getBalance() {
            ipcRenderer.send('getbalance', '');
        };
        var blinkbannerfor;
        function blinkbannerf() {
            var i = 0;
            var toggle = 1;
            blinkbannerfor = setTimeout(clearInterval(blinkbanner), 10000);



            var u301 = document.getElementById('u301');

            blinkbanner = setInterval(function () {
                if (toggle == 1) {
                    u301.style.background = "transparent url('images/red_banner_dull.png?crc=4284056163') no-repeat center center";
                    u301.style.width = '560px';
                    u301.style.backgroundSize = 'contain';

                    toggle = 2;
                }
                else if (toggle == 2) {
                    u301.style.background = "transparent url('images/red_banner.png?crc=3984176938') no-repeat center center";
                    u301.style.width = '560px';
                    u301.style.backgroundSize = 'contain';
                    toggle = 1;

                }
            }, 300);


        } blinkbannerf();
    </script>
    <script type="text/javascript">
        //printing goes here


        function setPrint() {
            this.contentWindow.__container__ = this;
            this.contentWindow.onbeforeunload = closePrint;
            this.contentWindow.onafterprint = closePrint;
            this.contentWindow.focus(); // Required for IE
            this.contentWindow.print();
        }
        function formatAMPM() {
            var d = new Date(),
                minutes = d.getMinutes().toString().length == 1 ? '0' + d.getMinutes() : d.getMinutes(),
                hours = d.getHours().toString().length == 1 ? '0' + d.getHours() : d.getHours(),
                ampm = d.getHours() >= 12 ? 'pm' : 'am',
                months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            return days[d.getDay()] + ' ' + months[d.getMonth()] + ' ' + d.getDate() + ' ' + d.getFullYear() + ' ' + hours + ':' + minutes + ampm;
        }

        function printPage() {
            document.getElementById("invoice-POS").style.visibility = 'visible';

            document.getElementById("date").innerHTML = formatAMPM();
            document.getElementById("printgameid").innerHTML = 'GameID: ' + newgameid;
            // <td class="Rate" id="Rate"></td>
            //           <td class="payment" id="payment"></td>
            var totalbamoun = document.getElementById("totalbetamount").innerHTML = totalbet;
            var table = document.getElementById("betinTable");


            //if(boxnow[a]> 0){
            // document.getElementById("Rate").innerHTML = a+' X ';
            // document.getElementById("payment").innerHTML = boxnow[a];
            a = 0;
            while (a < 10) {

                var row = table.insertRow(0);
                var cell1 = row.insertCell(0);
                cell1.style.width = '160px';
                // var cell2 = row.insertCell(1);

                cell1.innerHTML = a + ' X ' + boxnow[a];

                // cell2.innerHTML =  ; 
                console.log('row created: ' + a);
                a++;

            }
            //}

            printJS('invoice-POS', 'html');
            document.getElementById("invoice-POS").style.visibility = 'hidden';
            // var printcontent = document.getElementById("printableArea").innerHTML;



            /////
            userBal = currentBal;
            boxall = boxall.SumArray(boxnow);//sumArray(boxall,boxnow);
            zeromaker();
            console.log('boxall: ' + boxall);
            a = 0;
            while (a < 10) {
                table.deleteRow(0);
            }

        }
        function wheelAngle(numb) {
            // console.log('winner no: '+numb);
            switch (numb) {
                case 0: angleWheelRotate = '215'; break;
                case 1: angleWheelRotate = '251'; break;
                case 2: angleWheelRotate = '287'; break;
                case 3: angleWheelRotate = '323 '; break;
                case 4: angleWheelRotate = '358'; break;
                case 5: angleWheelRotate = '36 '; break;
                case 6: angleWheelRotate = '72 '; break;
                case 7: angleWheelRotate = '108'; break;
                case 8: angleWheelRotate = '144'; break;
                case 9: angleWheelRotate = '179'; break;



            }

            startSpin(angleWheelRotate);


        }

        //popup wheel
        var wheelSpinning = false;
        var theWheel = new Winwheel({
            'numSegments': 20,         // Specify number of segments.
            'drawMode': 'image',   // drawMode must be set to image.
            'drawText': false,      // Need to set this true if want code-drawn text on image wheels.
            'canvasId': 'u344_img',
            'segments':                // Define segments.
                [
                    { 'text': '4' },
                    { 'text': 'sp' },
                    { 'text': '5' },
                    { 'text': 'sp' },
                    { 'text': '6' },
                    { 'text': 'sp' },
                    { 'text': '7' },
                    { 'text': 'sp' },
                    { 'text': '8' },
                    { 'text': 'sp' },
                    { 'text': '9' },
                    { 'text': 'sp' },
                    { 'text': '0' },
                    { 'text': 'sp' },
                    { 'text': '1' },
                    { 'text': 'sp' },
                    { 'text': '2' },
                    { 'text': 'sp' },
                    { 'text': '3' },
                    { 'text': 'sp' },


                ],
            'animation':                   // Specify the animation to use.
            {
                'type': 'spinToStop',
                'duration': 6,     // Duration in seconds.
                'spins': 1,     // Number of complete spins.
                'callbackFinished': spinstopped,
                'clearTheCanvas': true,
                'callbackSound': playSound,   // Function to call when the tick sound is to be triggered.
                'soundTrigger': 'pin'        // Specify pins are to trigger the sound, the other option is 'segment'.
            },
            'pins':
            {
                'number': 10   // Number of pins. They space evenly around the wheel.
            }
        });

        var audio = new Audio('assets/tick.mp3');  // Create audio object and load tick.mp3 file.

        function playSound() {
            // Stop and rewind the sound if it already happens to be playing.
            audio.pause();
            audio.currentTime = 0;

            // Play the sound.
            audio.play();
        }
        // Create new image object in memory.
        var loadedImg = new Image();

        // Create callback to execute once the image has finished loading.
        loadedImg.onload = function () {
            theWheel.wheelImage = loadedImg;    // Make wheelImage equal the loaded image object.
            theWheel.draw();                    // Also call draw function to render the wheel.

        }

        // Set the image source, once complete this will trigger the onLoad callback (above).
        loadedImg.src = "images/wheel_of_fortune.png?crc=4273536606";


        // Vars used by the code in this page to do power controls.
        var wheelPower = 0;



        // -------------------------------------------------------
        // Click handler for spin button.
        // -------------------------------------------------------
        function startSpin(stopAt) {
            console.log('spinning started');
            // Ensure that spinning can't be clicked again while already running.
            if (wheelSpinning == false) {
                // Based on the power level selected adjust the number of spins for the wheel, the more times is has
                // to rotate with the duration of the animation the quicker the wheel spins.
                theWheel.rotationAngle = 0;     // Re-set the wheel angle to 0 degrees.
                theWheel.animation.spins = 6;
                theWheel.animation.stopAngle = stopAt;
                wheelSpinning = true;

                // Begin the spin animation by calling startAnimation on the wheel object.
                theWheel.startAnimation();
                //// joker spinngin wheel goes here
                drawStepok = function () {
                    var i;
                    angleInDegrees -= 302;


                    console.log(angleInDegrees);
                    console.log(joker);
                    ctx.rotate(angleInDegrees);
                    ctx.drawImage(base_image, 0, 0);




                }
                drawStepnook = function () {
                    angleInDegrees -= 305;

                    var i;

                    console.log(angleInDegrees);
                    console.log(joker);
                    ctx.rotate(angleInDegrees);
                    ctx.drawImage(base_image, base_image.width / 2, base_image.height / 2);



                }
                if (joker == false) {
                    r1 = 1;
                    drawStepok();
                }
                else {
                    r1 = 2;
                    drawStepnook();
                }

                // Set to true so that power can't be changed and spin button re-enabled during
                // the current animation. The user will have to reset before spinning again.
                wheelSpinning = true;


                angleInDegrees = 0;

            }
        }



        // -------------------------------------------------------
        // Function for reset button.
        // -------------------------------------------------------
        function resetWheel() {
            theWheel.stopAnimation(false);  // Stop the animation, false as param so does not call callback function.

            theWheel.draw();                // Call draw to render changes to the wheel.
            document.getElementById('last_winner').innerHTML = winNumber;
            console.log('spinning restarted');
            wheelSpinning = false;
            var winMusic = new Audio('assets/coins_win.mp3');  // Create audio object and load tick.mp3 file.

            function playSound() {
                // Stop and rewind the sound if it already happens to be playing.
                winMusic.pause();
                winMusic.currentTime = 0;

                // Play the sound.
                winMusic.play();
            }
            playSound();
            // clearInterval(blinkbannerfor);

        }

        // -------------------------------------------------------
        // Called when the spin animation has finished by the callback feature of the wheel because I specified callback in the parameters.
        // note the indicated segment is passed in as a parmeter as 99% of the time you will want to know this to inform the user of their prize.
        // -------------------------------------------------------

        function calculateBalance() {
            // currentBal = currentBal- totalbet;
            function calculateWinner(winNumber) {
                if (joker == true) {
                    winmultipler = 18;
                } else {
                    winmultipler = 9;
                }

                switch (winNumber) {
                    case 0: thiswin = boxall[0] * winmultipler;
                    case 1: thiswin = boxall[1] * winmultipler;
                    case 2: thiswin = boxall[2] * winmultipler;
                    case 3: thiswin = boxall[3] * winmultipler;
                    case 4: thiswin = boxall[4] * winmultipler;
                    case 5: thiswin = boxall[5] * winmultipler;
                    case 6: thiswin = boxall[6] * winmultipler;
                    case 7: thiswin = boxall[7] * winmultipler;
                    case 8: thiswin = boxall[8] * winmultipler;
                    case 9: thiswin = boxall[9] * winmultipler;
                }
                currentBal = currentBal + thiswin;
                console.log('thiswin: ' + thiswin);
                console.log('currentbal: ' + currentBal);
                //update balance here
                document.getElementById("lastwin").innerHTML = thiswin;
                document.getElementById("totalbal").innerHTML = "Bal: " + currentBal;
                //ipcRenderer.send('newbalance', currentBal);
                updateBalance(currentBal);
            };
            calculateWinner(winNumber);
        }
        function updateBalance() {
            boxall.fill(0);
            var upcoins = new Object();
            upcoins.uname = uname;
            upcoins.ucoins = currentBal;
            upcoins = JSON.stringify(upcoins);
            console.log('upcoins: ' + upcoins);
            ipcRenderer.send('upcoins', upcoins);
            zeromaker();
        }

        function spinstopped() {
            calculateBalance();

            resetWheel();
        }
    </script>
    <script type="text/javascript">
        if (document.location.protocol != 'https:') document.write('\x3Cscript src="http://musecdn.businesscatalyst.com/scripts/4.0/jquery-1.8.3.min.js" type="text/javascript">\x3C/script>');
    </script>
    <script type="text/javascript">
        window.jQuery || document.write('\x3Cscript src="scripts/jquery-1.8.3.min.js?crc=209076791" type="text/javascript">\x3C/script>');
    </script>
    <!-- Other scripts -->
    <script type="text/javascript">
        // Decide weather to suppress missing file error or not based on preference setting
        var suppressMissingFileError = false
    </script>
    <script src="scripts/require.js?crc=4157109226" type="text/javascript" async
        data-main="scripts/museconfig.js?crc=380897831"
        onload="if (requirejs) requirejs.onError = function(requireType, requireModule) { if (requireType && requireType.toString && requireType.toString().indexOf && 0 <= requireType.toString().indexOf('#scripterror')) window.Muse.assets.check(); }"
        onerror="window.Muse.assets.check();"></script>

</body>

</html>


<!-- change ids of the following -->